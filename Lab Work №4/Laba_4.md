–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4
---
__–¢–µ–º–∞:__ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ REST API


# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
API –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Django REST Framework –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–Ω–∏–º–µ-–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞–º–∏ –∞–Ω–∏–º–µ, –ø–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É.

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: `POST /api/register/`
- **–õ–æ–≥–∏–Ω**: `POST /api/login/` (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç access token)

## –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
API –Ω–µ –∏–º–µ–µ—Ç —è–≤–Ω–æ–≥–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `/api/`.

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8.

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–û—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º JSON-—Ñ–æ—Ä–º–∞—Ç–µ —Å –∫–æ–¥–∞–º–∏ HTTP.

---

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–Ω–∏–º–µ
**GET /api/data/<str:sort>/**
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `sort` (string): –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (`-score`, `title_ru`, –∏ —Ç. –¥.)
  - `pageNumber` (int, query –ø–∞—Ä–∞–º–µ—Ç—Ä): –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–û—Ç–≤–µ—Ç**:
  ```json
  {
      "total_elements": int,
      "data": [...]
  }
  ```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**GET /api/data/mylist/<int:id>/<str:sort>/**
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `id` (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `sort` (string): –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- **–û—Ç–≤–µ—Ç**: JSON —Å –∞–Ω–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–Ω–∏–º–µ
**GET /api/info/anime/**
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `id_anime` (int, query –ø–∞—Ä–∞–º–µ—Ç—Ä)
  - `id_user` (int, query –ø–∞—Ä–∞–º–µ—Ç—Ä)
- **–û—Ç–≤–µ—Ç**:
  ```json
  {
      "anime_info": {...},
      "anime_info2": {...},
      "anime_info3": {...},
      "score": float
  }
  ```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
**GET /api/anime/**
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `id_user` (int, query –ø–∞—Ä–∞–º–µ—Ç—Ä)
  - `id_anime` (int, query –ø–∞—Ä–∞–º–µ—Ç—Ä)
- **–û—Ç–≤–µ—Ç**: `"completed"`, `"planned"`, `"watching"`, `"dropped"`, –∏–ª–∏ `false`

### 5. –ü–æ–∏—Å–∫ –∞–Ω–∏–º–µ
**GET /api/search**
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `query` (string, query –ø–∞—Ä–∞–º–µ—Ç—Ä)
- **–û—Ç–≤–µ—Ç**: JSON —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –∞–Ω–∏–º–µ

### 6. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ –∞–Ω–∏–º–µ
**PUT /api/score/**
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```json
  {
      "anime_id": int,
      "user_id": int,
      "score": float
  }
  ```
- **–û—Ç–≤–µ—Ç**: JSON —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### 7. –£–¥–∞–ª–µ–Ω–∏–µ –∞–Ω–∏–º–µ –∏–∑ —Å–ø–∏—Å–∫–∞
**POST /api/anime/del**
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```json
  {
      "anime_id": int,
      "user_id": int
  }
  ```
- **–û—Ç–≤–µ—Ç**: `{ "message": "–û–±—ä–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞" }`

### 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
**GET /api/settings/** ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**PUT /api/settings/** ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```json
  {
      "username": "string",
      "email": "string",
      "age": int
  }
  ```

### 9. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
**POST /api/login/**
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```json
  {
      "username": "string",
      "password": "string"
  }
  ```
- **–û—Ç–≤–µ—Ç**:
  ```json
  {
      "access_token": "string"
  }
  ```

### 10. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
**POST /api/register/**
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
  ```json
  {
      "username": "string",
      "email": "string",
      "password": "string",
      "birthdate": "YYYY-MM-DD"
  }
  ```

### 11. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**GET /api/user/<int:user_id>/**
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `user_id` (int)
- **–û—Ç–≤–µ—Ç**: JSON —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
---
üìå 1. GET /api/data/<sort>/ (–°–ø–∏—Å–æ–∫ –∞–Ω–∏–º–µ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.20.44.png)
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.31.15.png)
---
üìå 2. GET /api/data/mylist/<id>/<sort>/ (–°–ø–∏—Å–æ–∫ –∞–Ω–∏–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.34.23.png)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.35.07.png)
---
üìå 3. GET /api/info/anime/ (–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–Ω–∏–º–µ)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.38.52.png)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.39.18.png)
---
üìå 4. PUT /api/score/ (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.41.25.png)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.46.02.png)
---
üìå 5. DELETE /api/anime/del (–£–¥–∞–ª–µ–Ω–∏–µ –∞–Ω–∏–º–µ –∏–∑ —Å–ø–∏—Å–∫–∞)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.50.39.png)  
![alt text](./image/–°–Ω–∏–º–æ–∫%20—ç–∫—Ä–∞–Ω–∞%202025-02-19%20–≤%2015.51.22.png)

